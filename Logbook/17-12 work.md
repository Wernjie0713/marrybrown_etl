# 17-12-2025 Work Log

## Summary

Investigated Site ID discrepancies. **ROOT CAUSE FOUND**: Xilnex Excel export transforms Site ID using proprietary logic.

---

## üéØ ROOT CAUSE DISCOVERED

### The Evidence

| Source              | Site ID for Veronica Jane SHOPEEPAY |
| ------------------- | ----------------------------------- |
| Xilnex Raw Database | **900**                             |
| Xilnex Excel Export | **1860**                            |
| Our Warehouse       | **900** ‚úÖ                          |
| Our API             | **900** ‚úÖ                          |

### Conclusion

**Xilnex Excel export applies internal logic** to calculate Computer Site ID that differs from the raw database value.

- ‚úÖ Our replication is 100% correct (matches Xilnex source)
- ‚úÖ Our API is 100% correct (returns database values)
- ‚ùå We CANNOT replicate Xilnex Excel's Site ID without their proprietary logic

---

## Comparison Results (Jan 17, 2025)

| Metric         | Value     |
| -------------- | --------- |
| API Entries    | 5,298     |
| XN Entries     | 5,154     |
| Common         | 5,043     |
| Only in XN     | 111       |
| Only in API    | 255       |
| **Match Rate** | **97.8%** |

### Discrepancy Breakdown

- **~206 API-only**: Site ID mismatch (API has 900, XN has 1860)
- **~111 XN-only**: Site ID mismatch (reverse direction)
- Both caused by Xilnex Excel's proprietary Site ID transformation

---

## Code Verification ‚úÖ

All fixes from Dec 15-16 are intact. No regressions found.

---

## Next Steps

- ‚úâÔ∏è **Sent email to Xilnex support** asking about Site ID transformation logic
- ‚è∏Ô∏è **Paused EOD Sales Summary Detail API** while waiting for reply
- üöÄ **Moving to develop another API** in the meantime

---

## Files Organized

Useful scripts moved to `scripts/eod_detail/`:

- `compare_eod_detail_12_12.py` - Main comparison script
- `compare_jan17.py` - Jan 17 comparison
- `convert_eod_detail_excel.py` - Excel converter
- `test_eod_detail_api.py` - API test script
